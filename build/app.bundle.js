!function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){"use strict";var n=r(1);(0,function(t){return t&&t.__esModule?t:{default:t}}(n).default)({}),$.urlParam=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null!=e?e[1]||0:null};var o=$.urlParam("chart");null!=o&&($(".slide").hide(),$("#"+o).show()),function(){var t={top:20,right:60,bottom:20,left:40};c3.generate({bindto:"#chartTrend",padding:t,data:{x:"x",columns:[["x",1993,1997,2001,2005,2009,2013,2017],["Minneapolis",.45,.46,.41,.3,.2,.33,.42],["St. Paul",.43,.43,.41,.36,.22,.2,.27]],type:"line",labels:{format:{}}},legend:{show:!1},point:{show:!1},color:{pattern:["#333","#bbb"]},axis:{y:{max:1,min:0,padding:{bottom:0,top:0},tick:{count:5,values:[0,.25,.5,.75,1],format:d3.format("%")}},x:{padding:{right:0,left:0},tick:{count:6,values:[1993,1997,2001,2005,2009,2013,2017],multiline:!1,format:d3.format(".0f")}}},grid:{x:{lines:[{value:2009,text:"Ranked-choice voting starts",position:"end",class:"powerline"}]}}})}(),function(){var t={top:20,right:60,bottom:20,left:80};c3.generate({bindto:"#chartReg",padding:t,data:{x:"x",columns:[["x",1993,1997,2001,2005,2009,2013,2017],["Minneapolis",222101,200311,217802,229593,231078,233351,239750],["St. Paul",143878,138198,144213,160414,157859,154672,156543]],type:"bar",labels:{format:{}}},legend:{show:!1},point:{show:!1},color:{pattern:["#333","#bbb"]},axis:{y:{max:25e4,min:0,padding:{bottom:0,top:0},tick:{count:6,values:[0,5e4,1e5,15e4,2e5,25e4],format:d3.format(",.0f")}},x:{tick:{count:6,values:[1993,1997,2001,2005,2009,2013,2017],multiline:!1,format:d3.format(".0f")}}},grid:{x:{lines:[{value:2009,text:"Ranked-choice voting starts",position:"end",class:"powerline"}]}}})}(),function(){var t={top:20,right:60,bottom:20,left:80};c3.generate({bindto:"#chartCandidates",padding:t,data:{x:"x",columns:[["x",1993,1997,2001,2005,2009,2013,2017],["Minneapolis",2,2,2,2,11,35,15],["St. Paul",2,2,2,2,2,4,10]],type:"bar",labels:{format:{}}},legend:{show:!1},point:{show:!1},color:{pattern:["#333","#bbb"]},axis:{y:{min:0,padding:{bottom:0,top:0},tick:{count:6,values:[0,7,14,21,28,35],format:d3.format(".0f")}},x:{tick:{count:6,values:[1993,1997,2001,2005,2009,2013,2017],multiline:!1,format:d3.format(".0f")}}},grid:{x:{lines:[{value:2009,text:"Ranked-choice voting starts",position:"end",class:"powerline"}]}}})}(),function(){var t={top:20,right:60,bottom:20,left:40};c3.generate({bindto:"#chartMPLS",padding:t,data:{x:"x",columns:[["x",1993,1997,2001,2005,2009,2013,2017],["Ward 1",.51,.48,.41,.31,.23,.3,.45],["Ward 2",.3,.29,.27,.26,.14,.27,.4],["Ward 3",.42,.41,.35,.22,.14,.31,.4],["Ward 4",.49,.47,.39,.24,.21,.23,.31],["Ward 5",.37,.4,.37,.24,.17,.24,.28],["Ward 6",.32,.35,.26,.21,.14,.34,.47],["Ward 7",.44,.46,.39,.28,.19,.34,.45],["Ward 8",.47,.45,.41,.35,.2,.35,.46],["Ward 9",.48,.49,.43,.32,.21,.34,.43],["Ward 10",.4,.45,.37,.28,.18,.3,.38],["Ward 11",.54,.54,.5,.35,.21,.39,.47],["Ward 12",.53,.54,.49,.38,.23,.4,.47],["Ward 13",.56,.6,.51,.41,.27,.46,.5]],type:"line",labels:{format:{}}},legend:{show:!1},point:{show:!1},color:{pattern:["#333"]},axis:{y:{max:1,min:0,padding:{bottom:0,top:0},tick:{count:5,values:[0,.25,.5,.75,1],format:d3.format("%")}},x:{padding:{right:0,left:0},tick:{count:6,values:[1993,1997,2001,2005,2009,2013],multiline:!1,format:d3.format(".0f")}}},grid:{x:{lines:[{value:2009,text:"Ranked-choice voting starts",position:"end",class:"powerline"}]}}})}(),function(){var t={top:20,right:60,bottom:20,left:40};c3.generate({bindto:"#chartSTP",padding:t,data:{x:"x",columns:[["x",1993,1997,2001,2005,2009,2013,2017],["Ward 1",.4,.37,.33,.31,.18,.24,0],["Ward 2",.44,.43,.34,.38,.22,.2,0],["Ward 3",.53,.52,.34,.49,.31,.26,0],["Ward 4",.46,.43,.32,.41,.24,.22,0],["Ward 5",.39,.43,.33,.32,.18,.16,0],["Ward 6",.4,.41,.36,.31,.17,.14,0],["Ward 7",.38,.47,.35,.31,.16,.14,0]],type:"line",labels:{format:{}}},legend:{show:!1},point:{show:!1},color:{pattern:["#333"]},axis:{y:{max:1,min:0,padding:{bottom:0,top:0},tick:{count:5,values:[0,.25,.5,.75,1],format:d3.format("%")}},x:{padding:{right:0,left:0},tick:{count:6,values:[1993,1997,2001,2005,2009,2013],multiline:!1,format:d3.format(".0f")}}},grid:{x:{lines:[{value:2009,text:"Ranked-choice voting starts",position:"end",class:"powerline"}]}}})}(),d3.csv("data/turnoutDIFF.csv",function(t){return{city:t.city,ward:+t.ward,vt1993:+t.vt1993,vt1997:+t.vt1997,vt2001:+t.vt2001,vt2005:+t.vt2005,vt2009:+t.vt2009,vt2013:+t.vt2013,vt2017:+t.vt2017,vtDIFF:+t.vtDIFF,vtAVG:+t.vtAVG}},function(t,e){function r(t,e,r){if("diff"==e){for(var n=0;n<r.length;n++)if(String(t.properties.city).toUpperCase()==String(r[n].city).toUpperCase()&&t.properties.ward==String("Ward "+r[n].ward)){if(r[n].vtDIFF>=.13)return"gray5";if(r[n].vtDIFF>=.11)return"gray4";if(r[n].vtDIFF>=.06)return"gray3";if(r[n].vtDIFF>0)return"gray1"}}else if("turnout"==e){for(var n=0;n<r.length;n++)if(String(t.properties.city).toUpperCase()==String(r[n].city).toUpperCase()&&t.properties.ward==String("Ward "+r[n].ward)){if(r[n].vt2017>=.45)return"gray5";if(r[n].vt2017>=.35)return"gray4";if(r[n].vt2017>=.3)return"gray3";if(r[n].vt2017>0)return"gray2"}}else if("average"==e)for(var n=0;n<r.length;n++)if(String(t.properties.city).toUpperCase()==String(r[n].city).toUpperCase()&&t.properties.ward==String("Ward "+r[n].ward)){if(r[n].vtAVG>=.4)return"gray5";if(r[n].vtAVG>=.3)return"gray4";if(r[n].vtAVG>=.2)return"gray3";if(r[n].vtAVG>0)return"gray2"}}function n(t,e,r){if("diff"==e){for(var n=0,o="",i=0;i<r.length;i++)String(t.properties.city).toUpperCase()==String(r[i].city).toUpperCase()&&t.properties.ward==String("Ward "+r[i].ward)&&(r[i].vtDIFF>=.13?o="gray4":r[i].vtDIFF>=.11?o="gray4":r[i].vtDIFF>=.06?o="gray3":r[i].vtDIFF>0&&(o="gray1"),n=r[i].vtDIFF);return"<div class='districtName'>"+t.properties.city+" - "+t.properties.ward+"</div><div class='districtName "+o+"'>"+d3.format("+%")(n)+" change</div>"}if("turnout"==e){for(var i=0;i<r.length;i++)String(t.properties.city).toUpperCase()==String(r[i].city).toUpperCase()&&t.properties.ward==String("Ward "+r[i].ward)&&(r[i].vt2017>=.45?o="gray5":r[i].vt2017>=.35?o="gray4":r[i].vt2017>=.3?o="gray3":r[i].vt2017>0&&(o="gray2"),n=r[i].vt2017);return"<div class='districtName'>"+t.properties.city+" - "+t.properties.ward+"</div><div class='districtName "+o+"'>"+d3.format("%")(n)+" turnout</div>"}if("average"==e){for(var i=0;i<r.length;i++)String(t.properties.city).toUpperCase()==String(r[i].city).toUpperCase()&&t.properties.ward==String("Ward "+r[i].ward)&&(r[i].vtAVG>=.4?o="gray5":r[i].vtAVG>=.3?o="gray4":r[i].vtAVG>=.2?o="gray3":r[i].vtAVG>0&&(o="gray2"),n=r[i].vtAVG);return"<div class='districtName'>"+t.properties.city+" - "+t.properties.ward+"</div><div class='districtName "+o+"'>"+d3.format("%")(n)+" average turnout</div>"}}function o(t,e,o,i,a,s,c,d){var l=320,u=300;if("us"==s)var p=d3.geo.albersUsa().scale(700).translate([330,200]);else if("mn"==s)var p=d3.geo.albersUsa().scale(5037).translate([50,970]);else if("metro"==s)var p=d3.geo.mercator().scale([8e4]).center([-93.070335,44.930977]);var f=d3.geo.path().projection(p),v=d3.select(t+" svg").attr("width",l).attr("height",u),g=v.append("g");d3.json("data/"+i,function(t,e){g.append("g").attr("class","states").selectAll("path").data(e.features).enter().append("path").attr("d",f).attr("id",function(t){return(s+"_"+t.properties.ward).replace(new RegExp(" ","g"),"-")}).attr("precinctName",function(t){return t.properties.ward}).attr("class",function(t){return r(t,a,c)}).style("stroke-width","1px").style("stroke","#fff").call(d3.helper.tooltip(function(t,e){return n(t,a,c)})),g.append("path").attr("id","state-borders").attr("d",f)});d3.behavior.zoom().on("zoom",function(){g.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),g.selectAll("circle").attr("d",f.projection(p)),g.selectAll("path").attr("d",f.projection(p))})}var i=e;d3.helper={},d3.helper.tooltip=function(t){return function(e){var r,n=d3.select("body").node();e.on("mouseover",function(e,o){d3.select("body").selectAll("div.tooltip").remove(),r=d3.select("body").append("div").attr("class","tooltip");var i=d3.mouse(n);r.style("left",i[0]+10+"px").style("top",i[1]-15+"px").style("position","absolute").style("z-index",1001);t(e,o)}).on("mousemove",function(e,o){var i=d3.mouse(n);r.style("left",i[0]+10+"px").style("top",i[1]-15+"px");var a=t(e,o)||"";r.html(a)}).on("mouseout",function(t,e){r.remove()})}},o("#map2017","#infobox","#chart","mpls_wards.geojson","turnout","metro",i,0),o("#mapPCT","#infobox","#chart","mpls_wards.geojson","diff","metro",i,0),o("#mapAVG","#infobox","#chart","mpls_wards.geojson","average","metro",i,0)})},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(2),a=function(t){return t&&t.__esModule?t:{default:t}}(i),s=function(){function t(e){n(this,t),this.options=e||{},this.options.pym=void 0===this.options.pym||this.options.pym,this.options.useView=void 0===this.options.useView||this.options.useView,this.options.views=this.options.views||{develop:/localhost.*|127\.0\.0\.1.*/i,staging:/staging/i},this.parseQuery(),this.setView(),this.options.pym&&(this.pym=_.isUndefined(window.pym)?void 0:new pym.Child({polling:500}))}return o(t,[{key:"setView",value:function(){if(this.options.useView){var t=void 0;if(_.find(this.options.views,function(e,r){return t=r,window.location.href.match(e)?r:void 0}),t){var e=document.createElement("div"),r=document.getElementsByTagName("body")[0];e.className="site-view site-view-"+t,r.insertBefore(e,r.childNodes[0])}}}},{key:"parseQuery",value:function(){this.query=a.default.parse(document.location.search),this.query.pym&&"true"===this.query.pym&&(this.options.pym=!0)}},{key:"deepClone",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"isEmbedded",value:function(){if(!_.isUndefined(this.embedded))return this.embedded;try{this.embedded=window.self!==window.top}catch(t){this.embedded=!0}return this.embedded}},{key:"hasLocalStorage",value:function(){if(!_.isUndefined(this.localStorage))return this.localStorage;try{window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),this.localStorage=!0}catch(t){this.localStorage=!1}return this.localStorage}},{key:"hasGeolocate",value:function(){return window.navigator&&"geolocation"in window.navigator}},{key:"geolocate",value:function(t){this.hasGeolocate()?window.navigator.geolocation.getCurrentPosition(function(e){t(null,{lat:e.coords.latitude,lng:e.coords.longitude})},function(){t("Unable to find your position.")}):t("Geolocation not available")}},{key:"goTo",value:function(t){var e=_.isElement(t)?t:t[0]&&_.isElement(t[0])?t[0]:document.getElementById(t);e&&(this.isEmbedded()&&this.pym?this.pym.scrollParentToChildEl(e):e.scrollIntoView({behavior:"smooth"}))}},{key:"gaPageUpdate",value:function(t){t=t||document.location.pathname+document.location.search+document.location.hash,window.ga&&(window.ga("set","page",t),window.ga("send","pageview"))}}]),t}();e.default=function(t){return new s(t)}},function(t,e,r){"use strict";function n(t){switch(t.arrayFormat){case"index":return function(e,r,n){return null===r?[i(e,t),"[",n,"]"].join(""):[i(e,t),"[",i(n,t),"]=",i(r,t)].join("")};case"bracket":return function(e,r){return null===r?i(e,t):[i(e,t),"[]=",i(r,t)].join("")};default:return function(e,r){return null===r?i(e,t):[i(e,t),"=",i(r,t)].join("")}}}function o(t){var e;switch(t.arrayFormat){case"index":return function(t,r,n){if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e)return void(n[t]=r);void 0===n[t]&&(n[t]={}),n[t][e[1]]=r};case"bracket":return function(t,r,n){return e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0===n[t]?void(n[t]=[r]):void(n[t]=[].concat(n[t],r)):void(n[t]=r)};default:return function(t,e,r){if(void 0===r[t])return void(r[t]=e);r[t]=[].concat(r[t],e)}}}function i(t,e){return e.encode?e.strict?s(t):encodeURIComponent(t):t}function a(t){return Array.isArray(t)?t.sort():"object"==typeof t?a(Object.keys(t)).sort(function(t,e){return Number(t)-Number(e)}).map(function(e){return t[e]}):t}var s=r(3),c=r(4);e.extract=function(t){return t.split("?")[1]||""},e.parse=function(t,e){e=c({arrayFormat:"none"},e);var r=o(e),n=Object.create(null);return"string"!=typeof t?n:(t=t.trim().replace(/^(\?|#|&)/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),o=e.shift(),i=e.length>0?e.join("="):void 0;i=void 0===i?null:decodeURIComponent(i),r(decodeURIComponent(o),i,n)}),Object.keys(n).sort().reduce(function(t,e){var r=n[e];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?t[e]=a(r):t[e]=r,t},Object.create(null))):n},e.stringify=function(t,e){e=c({encode:!0,strict:!0,arrayFormat:"none"},e);var r=n(e);return t?Object.keys(t).sort().map(function(n){var o=t[n];if(void 0===o)return"";if(null===o)return i(n,e);if(Array.isArray(o)){var a=[];return o.slice().forEach(function(t){void 0!==t&&a.push(r(n,t,a.length))}),a.join("&")}return i(n,e)+"="+i(o,e)}).filter(function(t){return t.length>0}).join("&"):""}},function(t,e,r){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e,r){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,s,c=n(t),d=1;d<arguments.length;d++){r=Object(arguments[d]);for(var l in r)i.call(r,l)&&(c[l]=r[l]);if(o){s=o(r);for(var u=0;u<s.length;u++)a.call(r,s[u])&&(c[s[u]]=r[s[u]])}}return c}}]);
//# sourceMappingURL=app.bundle.js.map